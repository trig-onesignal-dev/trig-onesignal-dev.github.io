!function(e){"use strict";function n(){this.$body=e("body")}function t(n){console.log("showInfoAlert"),n?(e("#push-good").removeClass("d-none"),e("#push-bad").addClass("d-none")):(e("#push-bad").removeClass("d-none"),e("#push-good").addClass("d-none"))}function o(){let e=0,o=setInterval(function(){var n;200<e?(clearInterval(o),console.log("OneSignal did not start.  Check OneSignal.init() parameters.")):OneSignal.User.PushSubscription.id?(clearInterval(o),OneSignalDeferred.push(function(n){console.log("add notification event listener"),n.Notifications.addEventListener("permissionChange",i)}),n={value:"OneSignalStart",timestamp:(new Date).getTime()},n=JSON.stringify(n),sessionStorage.setItem("OneSignalStart",n),console.log("OneSignal Started: "+n),OneSignalDeferred.push(async function(n){var e=await n.Notifications.permission,n=(console.log("Check Permission - OneSignal.User",n.User.PushSubscription.id),n.User.PushSubscription.optedIn);console.log("optedIn: "+n),console.log("permission: "+e),t(!!n)})):(console.log("Waiting for OneSignal.User.PushSubscription.id",OneSignal.User.PushSubscription.id),e++)},200)}function i(n){console.log("permission Changed",n),console.log(""+n),t(n)}function s(){OneSignalDeferred.push(async function(n){var e=await n.Notifications.permission,o=n.User.PushSubscription.optedIn;e||o?e&&!o&&(n.User.PushSubscription.optIn(),t(!0)):n.Notifications.requestPermission()})}function a(){OneSignalDeferred.push(async function(n){await n.Notifications.permission&&(n.User.PushSubscription.optOut(),t(!1))})}n.prototype.init=function(){console.log(window.performance.getEntriesByType("navigation"));try{console.log("OneSignal Init"),window.OneSignalDeferred=window.OneSignalDeferred||[],OneSignalDeferred.push(function(n){n.Debug.setLogLevel("debug"),n.init({appId:"a9ef011c-6a3d-4f5d-b00a-f76ff95790b4",safari_web_id:"web.onesignal.auto.39e347a3-7290-467c-af89-3542a6fc2365",notifyButton:{enable:!1},allowLocalhostAsSecureOrigin:!0})},function(){console.log("Permission Check"),o()},function(){console.log("function test")})}catch(n){console.log("OneSignal init error",n)}o(),e("#login-button").on("click",function(){OneSignalDeferred.push(function(n){console.log("login 123test"),n.login("123test"),sessionStorage.setItem("login","testUser");n=n.User.getTags();console.log("tags",n)})}),e("#logout-button").on("click",function(){OneSignalDeferred.push(function(){console.log("logout"),OneSignal.logout(),sessionStorage.removeItem("login");var n=OneSignal.User.getTags();console.log("tags",n)})}),e("#enable-push-button").on("click",function(){s()}),e("#disable-push-button").on("click",function(){a()}),e("#enable-push-button2").on("click",function(){s()}),e("#disable-push-button2").on("click",function(){a()}),e("#enable-push-button3").on("click",function(){s()}),e("#disable-push-button3").on("click",function(){a()}),e("#test-tags-button").on("click",function(){var o=sessionStorage.getItem("OneSignalStart");if(console.log("startJson: "+o),null!=o){var o=JSON.parse(o),t=(new Date).getTime().toString();let n=o.timestamp,e=new Date(0);e.setUTCMilliseconds(n);var i=t-e;console.log("OneSignal Started: ",e),console.log("OneSignal Started: ",o.timestamp,t),console.log("OneSignal Started: "+i)}OneSignalDeferred.push(function(n){var e=sessionStorage.getItem("login"),o=n.User.getTags();console.log("tags",o),e?(console.log("valid login",e),n.User.addTag("purchase","yes"),n.User.addTag("active_cart","yes")):(console.log("NOT logged in"),n.User.addTag("anon-user","yes")),console.log("tags",o)})}),e("#os-button-container").on("click",function(){console.log("os-button-container click")})},e.DemoMain=new n,e.DemoMain.Constructor=n}(window.jQuery),function(e){"use strict";e(document).ready(function(n){e.DemoMain.init()})}(window.jQuery);